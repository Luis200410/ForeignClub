{% extends "core/base.html" %}
{% block title %}Courses · FOREIGN{% endblock %}
{% block content %}
<section class="container-xl py-7">
    <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-end gap-4 mb-5">
        <div>
            <p class="eyebrow mb-2">Courses</p>
            <h1 class="display-5 fw-bold tracking-tight mb-3">Choose the mission that amplifies your voice.</h1>
            <p class="text-white-50 mb-0">Every cohort blends real interaction, adaptive games, and elite coaching. Pick the experience that aligns with your current focus.</p>
        </div>
        <a class="btn btn-light btn-lg px-5" href="{% url 'dashboard' %}">Back to dashboard</a>
    </div>

    {% if courses %}
        <div class="row g-4">
            {% for item in course_cards %}
                {% with course=item.course enrollment=item.enrollment %}
                    <div class="col-xl-4 col-lg-6">
                        <article class="course-card h-100" data-animate="fade-up" data-animate-delay="{{ forloop.counter0|add:1 }}00ms">
                            <div class="course-card__header">
                                <span class="badge badge-outline">{{ course.get_delivery_mode_display }}</span>
                                <span class="badge badge-soft">{{ course.get_difficulty_display }}</span>
                                <span class="badge badge-soft">Level {{ course.get_fluency_level_display }}</span>
                            </div>
                            <h2 class="h4 tracking-tight mb-2">{{ course.title }}</h2>
                            <p class="text-white-50 mb-4">{{ course.subtitle|default:course.summary|truncatechars:140 }}</p>
                            <ul class="course-meta list-unstyled mb-4">
                                <li><strong>Focus:</strong> {{ course.focus_area }}</li>
                                <li><strong>Cadence:</strong> {{ course.duration_weeks }} weeks · {{ course.weekly_commitment_hours }} hrs/week</li>
                                {% if course.start_date %}
                                    <li><strong>Kickoff:</strong> {{ course.start_date|date:"M j, Y" }}</li>
                                {% endif %}
                                <li><strong>Cohort size:</strong> {{ course.cohort_size }} learners</li>
                            </ul>
                            <div class="mt-auto d-flex flex-column gap-3">
                                <a class="btn btn-light w-100" href="{% url 'course_detail' course.slug %}">View experience</a>
                                {% if enrollment %}
                                    <div class="course-status">
                                        <span class="badge badge-soft">{{ enrollment.get_status_display }}</span>
                                        <span class="small text-white-50">Joined {{ enrollment.joined_at|date:"M j" }}</span>
                                    </div>
                                {% else %}
                                    <form action="{% url 'course_enroll' course.slug %}" method="post">
                                        {% csrf_token %}
                                        <input type="hidden" name="motivation" value="Ready to activate this path." />
                                        <button class="btn btn-outline-light w-100" type="submit">Join waitlist</button>
                                    </form>
                                {% endif %}
                            </div>
                        </article>
                    </div>
                {% endwith %}
            {% endfor %}
        </div>
    {% else %}
        <div class="dashboard-panel">
            <p class="mb-2 fw-semibold">Courses inbound</p>
            <p class="text-white-50 mb-0">We are crafting the next wave of immersive missions. Check back soon.</p>
        </div>
    {% endif %}
</section>
{% endblock %}
